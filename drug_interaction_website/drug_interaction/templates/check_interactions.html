{%  extends "base.html" %}
{% load static %}

{% block title %} Check Drug Interactions {% endblock %}

{% block header %} Check Drug Interactions {% endblock %}

{% block content %}
    <script src="{% static 'js/drug_interactions.js' %}"></script>
    <form method="get">
        {% for drug in drugs %}
            <div>
                <input type="text" name="drugs" value="{{ drug }}" placeholder="Drug Name">
                <button type="button" class="remove-drug">-</button>
            </div>
        {% endfor %}
        <button type="button" id="add-drug">+</button>
        <button type="submit">Check Interactions</button>
    </form>

    <hr>

    {% if errors %}
        <ul>
            {% for error in errors %}
                <li>{{ error }}</li>
            {% endfor %}
        </ul>
    {% elif interactions is not None %}

        <h2>Interactions:</h2>
        <ul>
            {% for drugs, codes in interactions.items %}
                <li><p>{{ drugs.0 }} ↔️ {{ drugs.1 }}:</p>
                    <ul>
                    {% for code in codes %}
                        <li>{{ code }}</li>
                    {% endfor %}
                    </ul>
                </li>
            {% empty %}
                <li>No interactions found</li>
            {% endfor %}
        </ul>
    {% endif %}
{% endblock %}
